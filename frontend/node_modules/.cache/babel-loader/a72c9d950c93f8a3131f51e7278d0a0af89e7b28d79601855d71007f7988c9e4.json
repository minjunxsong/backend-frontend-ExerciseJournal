{"ast":null,"code":"import axios from 'axios';\nimport { Line as LineChartGenerator } from \"vue-chartjs/legacy\";\nimport { Chart as ChartJS, Title, Tooltip, Legend, LineElement, LinearScale, CategoryScale, PointElement } from 'chart.js';\nconst API_URL = 'http://localhost:8000/devices';\nChartJS.register(Title, Tooltip, Legend, LineElement, LinearScale, CategoryScale, PointElement);\nexport default {\n  name: 'LineChart',\n  components: {\n    LineChartGenerator\n  },\n  props: {\n    chartId: {\n      type: String,\n      default: 'line-chart'\n    },\n    datasetIdKey: {\n      type: String,\n      default: 'label'\n    },\n    width: {\n      type: Number,\n      default: 400\n    },\n    height: {\n      type: Number,\n      default: 400\n    },\n    cssClasses: {\n      default: '',\n      type: String\n    },\n    styles: {\n      type: Object,\n      default: () => {}\n    },\n    plugins: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      loggedInUser: '',\n      // 로그인한 사용자 이름 저장\n      urlinfo: 'http://localhost:8000/devices',\n      deviceInfo: {\n        _id: null,\n        deviceId: null,\n        name: null,\n        latitude: null,\n        longitude: null,\n        description: null,\n        register_date: null\n      },\n      chartData: {\n        datasets: [{\n          label: '벤치프레스',\n          backgroundColor: 'f87979',\n          data: []\n        }, {\n          label: '데드리프트',\n          backgroundColor: 'f87979',\n          data: []\n        }, {\n          label: '스쿼트',\n          backgroundColor: 'f87979',\n          data: []\n        }]\n      },\n      chartOptions: {\n        responsive: true,\n        maintainAspectRatio: false\n      }\n    };\n  },\n  created() {\n    const storedUserName = localStorage.getItem('userName');\n    if (storedUserName) {\n      this.loggedInUser = storedUserName;\n      axios.get(this.urlinfo).then(res => {\n        // 저장된 사용자 이름과 일치하는 데이터만 필터링해서 표시합니다.\n        this.items = res.data.filter(item => item.deviceId === this.loggedInUser).map(item => {\n          return {\n            _id: item._id,\n            deviceId: item.deviceId,\n            name: item.name,\n            latitude: item.latitude,\n            longitude: item.longitude,\n            description: item.description,\n            register_date: this.formatDate(item.register_date)\n          };\n        });\n      }).catch(err => {\n        alert('에러 발생: ' + err); // 에러 발생\n      });\n    }\n  },\n\n  mounted() {\n    console.log(this.chartData);\n  },\n  // 코드 일부분\n  methods: {\n    updateChartData(selectedExercise) {\n      axios.get(API_URL).then(response => {\n        const data = response.data;\n\n        // Filter data based on selected exercise (latitude)\n        const exerciseData = data.filter(item => item.latitude === selectedExercise);\n\n        // Set labels and data for the selected exercise category\n        this.chartData.labels = exerciseData.map(item => {\n          const date = new Date(item.register_date);\n          return `${date.getMonth() + 1}/${date.getDate()}/${date.getFullYear()}`;\n        });\n        this.chartData.datasets = [{\n          label: selectedExercise,\n          backgroundColor: this.getBackgroundColor(selectedExercise),\n          borderColor: this.getBorderColor(selectedExercise),\n          data: exerciseData.map(item => item.longitude)\n        }];\n      }).catch(err => {\n        alert('에러 발생: ' + err);\n      });\n    },\n    getBackgroundColor(selectedExercise) {\n      switch (selectedExercise) {\n        case '벤치프레스':\n          return '#3498db';\n        // Blue\n        case '데드리프트':\n          return '#e74c3c';\n        // Red\n        case '스쿼트':\n          return '#2ecc71';\n        // Green\n        default:\n          return '#3498db';\n        // Default Blue\n      }\n    },\n\n    getBorderColor(selectedExercise) {\n      switch (selectedExercise) {\n        case '벤치프레스':\n          return '#2980b9';\n        // Darker Blue\n        case '데드리프트':\n          return '#c0392b';\n        // Darker Red\n        case '스쿼트':\n          return '#27ae60';\n        // Darker Green\n        default:\n          return '#2980b9';\n        // Default Darker Blue\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","Line","LineChartGenerator","Chart","ChartJS","Title","Tooltip","Legend","LineElement","LinearScale","CategoryScale","PointElement","API_URL","register","name","components","props","chartId","type","String","default","datasetIdKey","width","Number","height","cssClasses","styles","Object","plugins","Array","data","loggedInUser","urlinfo","deviceInfo","_id","deviceId","latitude","longitude","description","register_date","chartData","datasets","label","backgroundColor","chartOptions","responsive","maintainAspectRatio","created","storedUserName","localStorage","getItem","get","then","res","items","filter","item","map","formatDate","catch","err","alert","mounted","console","log","methods","updateChartData","selectedExercise","response","exerciseData","labels","date","Date","getMonth","getDate","getFullYear","getBackgroundColor","borderColor","getBorderColor"],"sources":["src/components/DataChart2.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"chart-container\">\r\n      <LineChartGenerator id=\"my-chart-id\" :chart-options=\"chartOptions\" :chart-data=\"chartData\" :chart-id=\"chartId\"\r\n        :dataset-id-key=\"datasetIdKey\" :plugins=\"plugins\" :css-classes=\"cssClasses\" :styles=\"styles\" :width=\"width\"\r\n        :height=\"height\"/>\r\n    </div>\r\n\r\n    <div class=\"button-container\">\r\n      <button @click=\"updateChartData('벤치프레스')\" class=\"cute-button\">벤치프레스</button>\r\n      <button @click=\"updateChartData('데드리프트')\" class=\"cute-button\">데드리프트</button>\r\n      <button @click=\"updateChartData('스쿼트')\" class=\"cute-button\">스쿼트</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport axios from 'axios'\r\nimport { Line as LineChartGenerator } from \"vue-chartjs/legacy\"\r\nimport { Chart as ChartJS, Title, Tooltip, Legend, LineElement, LinearScale, CategoryScale, PointElement } from 'chart.js'\r\n\r\nconst API_URL = 'http://localhost:8000/devices'\r\n\r\nChartJS.register(Title,\r\n  Tooltip, Legend, LineElement, LinearScale, CategoryScale, PointElement)\r\n\r\nexport default {\r\n  name: 'LineChart',\r\n  components: { LineChartGenerator },\r\n  props: {\r\n    chartId: {\r\n      type: String,\r\n      default: 'line-chart'\r\n    },\r\n    datasetIdKey: {\r\n      type: String,\r\n      default: 'label'\r\n    },\r\n    width: {\r\n      type: Number,\r\n      default: 400\r\n    },\r\n    height: {\r\n      type: Number,\r\n      default: 400\r\n    },\r\n    cssClasses: {\r\n      default: '',\r\n      type: String\r\n    },\r\n    styles: {\r\n      type: Object,\r\n      default: () => { }\r\n    },\r\n    plugins: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loggedInUser: '', // 로그인한 사용자 이름 저장\r\n      urlinfo: 'http://localhost:8000/devices',\r\n      deviceInfo: {\r\n        _id: null,\r\n        deviceId: null,\r\n        name: null,\r\n        latitude: null,\r\n        longitude: null,\r\n        description: null,\r\n        register_date: null\r\n      },\r\n      \r\n      chartData: {\r\n\r\n        datasets: [\r\n          {\r\n            label: '벤치프레스',\r\n            backgroundColor: 'f87979',\r\n            data: []\r\n          },\r\n          {\r\n            label: '데드리프트',\r\n            backgroundColor: 'f87979',\r\n            data: []\r\n          },\r\n          {\r\n            label: '스쿼트',\r\n            backgroundColor: 'f87979',\r\n            data: []\r\n          }\r\n        ]\r\n      },\r\n      chartOptions: {\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    const storedUserName = localStorage.getItem('userName');\r\n\r\n    if (storedUserName) {\r\n      this.loggedInUser = storedUserName;\r\n\r\n      axios.get(this.urlinfo)\r\n        .then((res) => {\r\n          // 저장된 사용자 이름과 일치하는 데이터만 필터링해서 표시합니다.\r\n          this.items = res.data\r\n            .filter(item => item.deviceId === this.loggedInUser)\r\n            .map(item => {\r\n              return {\r\n                _id: item._id,\r\n                deviceId: item.deviceId,\r\n                name: item.name,\r\n                latitude: item.latitude,\r\n                longitude: item.longitude,\r\n                description: item.description,\r\n                register_date: this.formatDate(item.register_date)\r\n              };\r\n            });\r\n        })\r\n        .catch((err) => {\r\n          alert('에러 발생: ' + err); // 에러 발생\r\n        });\r\n    }\r\n  },\r\n  mounted() {\r\n    console.log(this.chartData)\r\n  },\r\n  // 코드 일부분\r\n  methods: {\r\n    updateChartData(selectedExercise) {\r\n      axios.get(API_URL)\r\n        .then((response) => {\r\n          const data = response.data;\r\n\r\n          // Filter data based on selected exercise (latitude)\r\n          const exerciseData = data.filter(item => item.latitude === selectedExercise);\r\n\r\n          // Set labels and data for the selected exercise category\r\n          this.chartData.labels = exerciseData.map(item => {\r\n            const date = new Date(item.register_date);\r\n            return `${date.getMonth() + 1}/${date.getDate()}/${date.getFullYear()}`;\r\n          });\r\n\r\n          this.chartData.datasets = [\r\n            {\r\n              label: selectedExercise,\r\n              backgroundColor: this.getBackgroundColor(selectedExercise),\r\n              borderColor: this.getBorderColor(selectedExercise),\r\n              data: exerciseData.map(item => item.longitude)\r\n            }\r\n          ];\r\n        })\r\n        .catch((err) => {\r\n          alert('에러 발생: ' + err);\r\n        });\r\n    },\r\n\r\n    getBackgroundColor(selectedExercise) {\r\n      switch (selectedExercise) {\r\n        case '벤치프레스':\r\n          return '#3498db'; // Blue\r\n        case '데드리프트':\r\n          return '#e74c3c'; // Red\r\n        case '스쿼트':\r\n          return '#2ecc71'; // Green\r\n        default:\r\n          return '#3498db'; // Default Blue\r\n      }\r\n    },\r\n\r\n    getBorderColor(selectedExercise) {\r\n      switch (selectedExercise) {\r\n        case '벤치프레스':\r\n          return '#2980b9'; // Darker Blue\r\n        case '데드리프트':\r\n          return '#c0392b'; // Darker Red\r\n        case '스쿼트':\r\n          return '#27ae60'; // Darker Green\r\n        default:\r\n          return '#2980b9'; // Default Darker Blue\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.chart-container {\r\n  position: relative;\r\n}\r\n\r\n.button-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  background-color: #fff;\r\n  /* 선택에 따라 색상 조정 */\r\n  padding: 10px;\r\n}\r\n\r\n.cute-button {\r\n  background-color: #3498db;\r\n  color: white;\r\n  padding: 10px 20px;\r\n  font-size: 16px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  margin-right: 10px;\r\n  margin-bottom: 10px;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.cute-button:hover {\r\n  background-color: #2980b9;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}